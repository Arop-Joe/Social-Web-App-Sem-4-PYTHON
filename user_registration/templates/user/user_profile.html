{%extends 'base.html'%}
{% load static %}

{%block head_title%}
Profile
{%endblock head_title%}


{%block body%}
<div style="align-items: center;justify-content: center;text-align: center;">
{% include "posts/post_modal.html" %}
<div style="display: flex;align-items: center;justify-content: center;text-align: center;">{% if user.profile.image %}
<img src="{{ user.profile.image.url }}" alt="{{ user.get_full_name }}" id="following-image-{{user.username}}" style="width:75px;float: left;" class="border rounded-circle border-white" />
{% elif user.socialaccount_set.all.0.get_avatar_url %}
<img src="{{ user.socialaccount_set.all.0.get_avatar_url }}" alt="{{ user.get_full_name }}" id="following-image-{{user.username}}" style="width:75px;float: left;" class="border rounded-circle border-white" />
{% else %}
<img src="{% static 'images/profile.png' %}" alt="{{ user.get_full_name }}" id="following-image-{{user.username}}" style="width:75px;float: left;" class="border rounded-circle border-white" />
{% endif %}
<h3><b>{{object.username}}</b></h3></div><br>
{% ifnotequal request.user.username object.username %}
<p>
<<<<<<< HEAD
    <a href='{{object.profile.get_follow_url}}' class="user-follow btn btn-primary" id='follow-{{object.username}}' data-id='{{object.username}}'>
=======
    <a href='{{object.profile.get_follow_url}}' class="user-follow" id='follow-{{object.username}}' data-id='{{object.username}}'>
>>>>>>> bf14accb4d811a285714f6f9d735f54a097ba34e
        {% if following %}Unfollow{% else %}Follow{% endif %}
    </a>
</p>
{% endifnotequal  %}
{% include "user/users_modal.html" with followingusers=object.profile.get_following.all followersusers=object.followed_by.all %}
<button type="button" style="outline:none;border: none;border:0;padding:0;decoration::none;" class="user-following-btn bg-light" data-toggle="modal" data-target="#FollowingModalLong" id="following-count-{{object.username}}" data-count="{{object.profile.get_following.count}}" data-id='{{request.user.username}}'>
  Following: {{object.profile.get_following.count}}
</button>
<button type="button" style="outline:none;border: none;decoration::none;" class="user-followers-btn  bg-light" data-toggle="modal" data-target="#FollowersModalLong" id="followers-count-{{object.username}}" data-count="{{object.followed_by.all.count}}" data-id='{{request.user.username}}'>
  Followers: {{object.followed_by.all.count}}
</button>

<br><br>
<h4>Posts</h4>
</div> 
<div class="container">
    <div id="post-container" class="row" style="align-items: center;justify-content: center;" data-url="/profile/api/{{object.username}}/">
    
    </div>
    <div style="align-items: center;justify-content: center;text-align: center;">
        <a href="#" id="load_more_posts">Load More Posts</a>
    </div>
    
</div>



{%endblock%}

{% block javascript %}
    <script>
        $(document).ready(function(){
            loadPostData("post-container")
        });
    </script>
{% endblock %}