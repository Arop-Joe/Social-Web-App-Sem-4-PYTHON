{%extends 'base.html'%}
{% load static %}

{%block head_title%}
Profile
{%endblock head_title%}


{%block body%}
{% include "posts/post_modal.html" %}
{{object.username}}<br>
{% ifnotequal request.user.username object.username %}
<p>
    <a href='{{object.profile.get_follow_url}}' class="user-follow" id='follow-{{object.username}}' data-id='{{object.username}}'>
        {% if following %}Unfollow{% else %}Follow{% endif %}
    </a>
</p>
{% endifnotequal  %}
{% include "user/users_modal.html" with followingusers=object.profile.get_following.all followersusers=object.followed_by.all %}
<button type="button" class="btn btn-primary user-following-btn" data-toggle="modal" data-target="#FollowingModalLong" id="following-count-{{object.username}}" data-count="{{object.profile.get_following.count}}" data-id='{{request.user.username}}'>
  Following: {{object.profile.get_following.count}}
</button>
<button type="button" class="btn btn-primary user-followers-btn" data-toggle="modal" data-target="#FollowersModalLong" id="followers-count-{{object.username}}" data-count="{{object.followed_by.all.count}}" data-id='{{request.user.username}}'>
  Followers: {{object.followed_by.all.count}}
</button>
<br><br>
<h4>Posts</h4>
    <div id="post-container" data-url="/profile/api/{{object.username}}/">
        </div>
        <div>
            <a href="#" id="load_more_posts">Load More Posts</a>
        </div>



{%endblock%}

{% block javascript %}
    <script>
        $(document).ready(function(){
            loadPostData("post-container")
        });
    </script>
{% endblock %}